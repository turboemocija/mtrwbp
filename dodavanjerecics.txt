using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;

namespace ElektronskiRecnik01
{
    public partial class DodavanejReci : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            SqlConnection con = new SqlConnection(SqlDataSource1.ConnectionString);
            con.Open();
            int k = 0;
            SqlDataAdapter adapter = new SqlDataAdapter();
            SqlCommand komanda1 = new SqlCommand("Select * from tabela1", con);
            DataTable tabela = new DataTable();
            adapter.SelectCommand = komanda1;
            adapter.Fill(tabela);
            k = tabela.Rows.Count + 1;
            string s1, s2, s3;
            s1 = TextBox1.Text;
            s2 = TextBox2.Text;
            s3 = TextBox3.Text;
            if (s1 != "" && s2 != "")
            {
                try
                {
                    string upit = "INSERT INTO [tabela1] ([Engleski],[Srpski],[Opis]) VALUES(@Engleski,@Srpski,@Opis)";
                    SqlCommand komanda = new SqlCommand(upit, con);
                    //komanda.Parameters.AddWithValue("@Id", k);
                    komanda.Parameters.AddWithValue("@Engleski", s1);
                    komanda.Parameters.AddWithValue("@Srpski", s2);
                    if (s3 != "")
                        komanda.Parameters.AddWithValue("@Opis", s3);
                    else komanda.Parameters.AddWithValue("@Opis", DBNull.Value);

                    komanda.ExecuteNonQuery();
                    TextBox1.Text = TextBox2.Text = TextBox3.Text = "";
                    Label4.Font.Size = 40;
                    Label4.Text = "Uspesno ste upisali rec u recnik!";

                }
                catch
                {
                    Label4.Text = "Ne mozete upisati ovaj podatak";
                }
            }
        }

        protected void Button2_Click(object sender, EventArgs e)
        {

            Response.Redirect("Recnik.aspx");
            
        }
    }
}